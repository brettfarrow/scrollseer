/*!
 * ScrollSeer v0.1.0
 * Based on:
 * jquery.scrolldepth.js | v0.3
 * Copyright (c) 2013 Rob Flaherty (@robflaherty)
 * Licensed under the MIT and GPL licenses.
 */
;(function($,window,document,undefined){var defaults={elements:[],minHeight:0,percentage:true,testing:false},$window=$(window),cache=[];$.scrollDepth=function(options){var startTime=+new Date;options=$.extend({},defaults,options);if($(document).height()<options.minHeight){return}sendEvent("Percentage","Baseline");function sendEvent(action,label,timing){if(!options.testing){if(typeof(ga)!=="undefined"){ga("send","event","Scroll Depth",action,label,1,{nonInteraction:1});if(arguments.length>2){ga("send","timing","Scroll Depth",action,timing,label)}}if(typeof(_gaq)!=="undefined"){_gaq.push(["_trackEvent","Scroll Depth",action,label,1,true]);if(arguments.length>2){_gaq.push(["_trackTiming","Scroll Depth",action,timing,label,100])}}}else{$("#console").html(action+": "+label)}}function calculateMarks(docHeight){return{"20%":parseInt(docHeight*0.25,10),"40%":parseInt(docHeight*0.25,10),"60%":parseInt(docHeight*0.5,10),"80%":parseInt(docHeight*0.75,10),"100%":docHeight-1}}function checkMarks(marks,scrollDistance,timing){$.each(marks,function(key,val){if($.inArray(key,cache)===-1&&scrollDistance>=val){sendEvent("Percentage",key,timing);cache.push(key)}})}function checkElements(elements,scrollDistance,timing){$.each(elements,function(index,elem){if($.inArray(elem,cache)===-1&&$(elem).length){if(scrollDistance>=$(elem).offset().top){sendEvent("Elements",elem,timing);cache.push(elem)}}})}function throttle(func,wait){var context,args,result;var timeout=null;var previous=0;var later=function(){previous=new Date;timeout=null;result=func.apply(context,args)};return function(){var now=new Date;if(!previous){previous=now}var remaining=wait-(now-previous);context=this;args=arguments;if(remaining<=0){clearTimeout(timeout);timeout=null;previous=now;result=func.apply(context,args)}else{if(!timeout){timeout=setTimeout(later,remaining)}}return result}}$window.on("scroll.scrollDepth",throttle(function(){var docHeight=$(document).height(),winHeight=window.innerHeight?window.innerHeight:$window.height(),scrollDistance=$window.scrollTop()+winHeight,marks=calculateMarks(docHeight),timing=+new Date-startTime;if(cache.length>=4+options.elements.length){$window.off("scroll.scrollDepth");return}if(options.elements){checkElements(options.elements,scrollDistance,timing)}if(options.percentage){checkMarks(marks,scrollDistance,timing)}},500))}})(jQuery,window,document);jQuery.scrollDepth();